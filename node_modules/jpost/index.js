
var parse = require('url').parse
var http = require('http')

module.exports = function(url, obj, cb) {
  
  if (0 != url.indexOf('http')) url = 'http://' + url
  var parsed = parse(url)

  var options = {
    hostname: parsed.hostname,
    port: parsed.port,
    method: 'POST',
    headers: {
      'Content-Type' : 'application/json'
    }
  }

  var req = http.request(options)
  req.end(JSON.stringify(obj))

  req.on('error', cb)

  req.on('response', function(res) {
    return cb(null, res)
  })

}



